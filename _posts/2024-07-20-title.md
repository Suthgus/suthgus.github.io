---
layout: post
title:  "데이터 탐색과 시각화"
date : 2024-07-20 00:25:20 +0700
---
데이터를 올바르게 파악하고 효율적으로 가공하는 것은 ML 모델의 성능에 중요한 영향을 미친다. 따라서 탐색적 데이터 분석과 상관성 분석, 데이터 시각화, 더불어 데이터 전처리 단계는 데이터 분석 프로세스에서 가장 많은 시간과 노력이 소모된다. 각 단계들을 서로 상호작용하면서 양방향으로 이루어진다. 
![image](https://github.com/user-attachments/assets/d6776d1b-496d-4ca3-9aa0-cd8049d9d93e)

 
Raw data는 오류와 이상치를 가지고 있는 경우가 많기 때문에 다양한 각도에서의 데이터 탐색과 시각화를 통해 데이터를 정제해 가치 있는 결과가 나오도록 해야함. 
시각화의 궁극적 목적은 분석 결과의 커뮤니케이션(흥미유발과 효과적인 전달)-> 데이터의 형태나 분석목적에 따라 효과적인 표현 방식 선택 
10.1 탐색적 데이터 분석(EDA)
원천의 데이터를 있는 그대로 탐색하고 분석하는 기법
기술통계와 데이터 시각화를 통해 데이터의 특성을 파악하는 것
EDA의 목적: 분석을 위한 데이터의 형태 적합성 확인, 데이터 특성 파악, 결측값이나 이상치 보완, 변수 간 관계성 파악, 분석 목적과 방향성 점검 및 보정
10.2 공분산과 상관성 분석
각 변수들의 특성(평균, 분산, 왜도, 첨도, 결측치)을 파악한 후 변수의 관계를 파악함. 
타깃변수 Y와 입력변수 X와의 관계는 물론 입력변수 X 들 간의 관계도 살펴보아야 함 -> 다중공선선 방지와 데이터에 대한 이해도 상승 
변수 간의 상관관계를 파악하는 대표적인 개념 : 공분산과 상관계수 (각 변수의 변동이 얼마나 닮았는지를 표현함) – 선형관계만 측정가능 -> 산점도 그래프를 그려 연관성과 이상치 등을 추가적으로 확인해 보는 것이 좋음
-	공분산: df.cov() 
-	서로 공유하는 분산, 두 분산의 관계/ 데이터 셋에 X1, X2 변수가 있을 때, X1, X2의 공분산: X1변수 각 값의 편차(해당 값- 평균), X2변수 각 값의 편차를 곱한 값을 모두 더해준 후 전체 개수 n(-1)으로 나눠 줌
-	 
-	단점: 공분산은 각 변수 간의 다른 척도 기준이 그대로 반영되기 때문에, 값 자체로는 상관성의 정도를 평가하기 어려움/ 양의 상관관계, 음의 상관관계, 무 상관관계가 존재한다는 것만 알 수 있음 

-	피어슨(Pearson) 상관계수 : df.corr(method+’pearson’)
-	변수 X1과 X2가 함께 변하는 정도(공분산)를 X1과 X2가 변하는 전체 정도로 나눠준 것 (-1≤R≤1)
-	공분산의 단점 해결 가능  
-	 
-	 
-	주의할 점) 산점도의 기울기와 상관계수는 관련이 없다. 상관계수가 높다는 것은 X2를 예상할 수 있는 정확도, 즉 설명력이 높다는 것이다. 
-	상관계수를 히트맵으로 시각화하여 보다 쉽게 상관성의 높고 낮음을 파악할 수 있음: sns.heatmap(df.corr(), cmap=’viridis’) / 하지만 정확한 수치가 나오지 않아 불편한 면이 있음 -> clustermap 히트맵을 이용하면 히트맵과 함께 상관계수도 확인할 수 있음:   sns.clustermap(df.corr(), annot=True, cmap='RdYlBu_r', vmin=-1, vmax=1)

10.3 시간 시각화
-	데이터를 시계열 형태로 표현하여 시간 흐름에 따른 데이터의 변화를 표현-> 전체적인 흐름 파악 가능, 데이터의 트렌드나 노이즈 발견 가능, 
-	분류: 연속형과 분절형
-	연속형 시간 시각화: 선그래프 – 시간 간격의 밀도가 높을 때 사용/ 데이터의 양이 너무 많거나 변동이 심하면 추세선을 삽입(주로 이동평균 방법 사용: rolling() 함수)하여 전체적인 추이를 가늠할 수 있음
-	 
-	분절형 시간 시각화: 막대그래프, 점그래프 – 시간의 밀도가 낮은 경우에 활용, 값들의 상대적 차이를 나타내는 것에 유리, 막대에 색상을 표현하여 정보를 추가할 수도 있음/ 누적 막대그래프는 한 시점에 2개 이상의 세부항목이 존재할 때 사용
-	 

10.4 비교시각화
-	그룹별 차이를 나타내기 위함임. 
-	그룹별 요소가 많아 막대그래프로 표현하기에 데이터가 복잡할 때 사용
-	히트맵 차트: 그룹과 비교 요소가 많을 때 효과적으로 시각화 할 수 있음, 각각의 셀에서의 색상과 채도를 통해 값의 높고 낮음과 요소 간의 관계를 쉽게 파악할 수 있음
-	방사형 차트
-	평행 좌표 그래프: 여러 변수를 평행으로 배치해서 수치를 표현하기 때문에 집단적 경향성을 표현하는데 용이함. 정규화를 통해서 차이를 더 부각시켜(0~100%로 변환) 효과적으로 표현할 수 있음.
10.5 분포 시각화
-	분포 시각화를 통해 변수들이 어떤 요소로 어느 정도의 비율로 구성되어 있는지를 확인하여 직관적으로 데이터를 이해할 수 있음.
-	양적 척도인지, 질적 척도인지에 따라 구분해서 그림 – 양적 척도(막대, 선그래프, 히스토그램), 질적척도(파이차트, 도넛차트: 전체를 100%로 하여 구성 요소들의 분포 정도를 면적(각도)로 표현, 둘의 다른 점은 가운데 구멍의 유무)
-	 
-	질적척도(트리맵 차트): 구성 요소가 복잡할 때 사용. 하나의 큰 사각형을 구성 요소의 비율에 따라 작은 사각형으로 쪼개어 분포를 표현함. 사각형 안에 더 작은 사각형을 포함시켜 위계구조 표현 가능(많은 구성 요소들의 분포를 체계적으로 표현 가능), 구성 요소들 간의 규모 차이가 크면 표현이 어려움
-	질적척도(와플차트): 와플처럼 일정한 네모난 조각들로 분포를 표현함. 위계구조는 표현 못 함. 
-	 

10.6 관계 시각화
-	두 개의 연속형 변수 간의 관계를 나타내는 산점도를 통해 두 변수 간의 관계를 파악할 수 있음- 산점도를 시각화할 때 팁
-	극단치로 인해 주요 분포 구간이 압축되어 시각화의 효율이 떨어지기 때문에 극단치를 제거하고 그리는 것이 좋음. 
-	데이터가 너무 많아서 점들이 서로 겹쳐서 표현될 때, 점에 투명도를 주어 점들의 밀도를 함께 표현할 수 있음.(alpha = 0.4)
-	버블차트: 세 가지 요소의 상관관계를 표현할 수 있음(두 요소 간 관계만 표현할 수 있는 산점도의 한계 해소). 버블 면적을 통해 한 가지 요소를 추가적으로 볼 수 있음. 원의 면적을 보아야 하기 때문에 관측지가 너무 많으면 정보 전달의 효율이 떨어짐
-	 
10.7 공간 시각화
-	데이터가 지리적 위치와 관련이 있으면 실제 지도 위에 데이터를 표현하는 것이 효과적임. 데이터를 훨씬 명확하고 직관적으로 볼 수 있음
-	위치 정보인 위도와 경도 데이터를 지도에 매핑하여 시각적으로 표현
-	 
10.8 박스 플롯 (상자 수염 그림)
-	네모 상자 모양에 최댓값과 최솟값을 나타내는 선이 결합된 모양의 데이터 시각화 방법
-	하나의 그림을 통해 양적 척도 데이터의 분포 및 편향성, 평균과 중앙값 등 다양한 수치를 보기 쉽게 정리해줌. 특히 두 변수의 값을 비교할 때 효과적임
-	데이터의 속성을 유추할 수 있는 5개의 대표적인 수치를 그림으로 표현하여 데이터 특성을 알 수 있음 – 최솟값, 제1사분위, 제2사분위, 제3사분위, 최댓값(, 평균)
-	
 


